<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>DTS Application Library: Referenced Lockable Objects</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DTS Application Library
   &#160;<span id="projectnumber">0.2.3</span>
   </div>
   <div id="projectbrief">Application library containing referenced objects and interfaces to common libraries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___l_i_b-_o_b_j.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Referenced Lockable Objects<div class="ingroups"><a class="el" href="group___l_i_b.html">Distrotech Application Library</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Utilities for managing referenced lockable objects.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___l_i_b-_o_b_j-_bucket"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j-_bucket.html">Hashed bucket linked lists of referenced objects</a></td></tr>
<tr class="memdesc:group___l_i_b-_o_b_j-_bucket"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store references in and retrive from linked lists based on a hash. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:refobj_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="refobj_8c.html">refobj.c</a></td></tr>
<tr class="memdesc:refobj_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Referenced Lockable Objects. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structref__obj.html">ref_obj</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal structure of all referenced objects.  <a href="structref__obj.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga0d5eb5885263228f57b0dba4dc8d90fa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#ga0d5eb5885263228f57b0dba4dc8d90fa">clearflag</a>(obj, flag)</td></tr>
<tr class="memdesc:ga0d5eb5885263228f57b0dba4dc8d90fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically clear a flag in the flags field of a referenced object.  <a href="#ga0d5eb5885263228f57b0dba4dc8d90fa">More...</a><br/></td></tr>
<tr class="separator:ga0d5eb5885263228f57b0dba4dc8d90fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad2acae829630a5df6b23d108520c71c2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#gad2acae829630a5df6b23d108520c71c2">setflag</a>(obj, flag)</td></tr>
<tr class="memdesc:gad2acae829630a5df6b23d108520c71c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically set a flag in the flags field of a referenced object.  <a href="#gad2acae829630a5df6b23d108520c71c2">More...</a><br/></td></tr>
<tr class="separator:gad2acae829630a5df6b23d108520c71c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaf8bc071257e95e30652a7b211b61315"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#gaaf8bc071257e95e30652a7b211b61315">testflag</a>(obj, flag)&#160;&#160;&#160;(<a class="el" href="group___l_i_b-_o_b_j.html#ga4af4ae14c4a3e9f3037a09237bcfeae3">objlock</a>(obj) | (obj-&gt;flags &amp; flag) | <a class="el" href="group___l_i_b-_o_b_j.html#ga8c73b68730aa4452357e84af27e00008">objunlock</a>(obj))</td></tr>
<tr class="memdesc:gaaf8bc071257e95e30652a7b211b61315"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically test a flag in the flags field of a referenced object.  <a href="#gaaf8bc071257e95e30652a7b211b61315">More...</a><br/></td></tr>
<tr class="separator:gaaf8bc071257e95e30652a7b211b61315"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ec69aa3720101b505e03c2f64758cfe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#ga7ec69aa3720101b505e03c2f64758cfe">DTS_OJBREF_CLASS</a>(classtype)</td></tr>
<tr class="memdesc:ga7ec69aa3720101b505e03c2f64758cfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add this macro to a C++ class to add refobj support.  <a href="#ga7ec69aa3720101b505e03c2f64758cfe">More...</a><br/></td></tr>
<tr class="separator:ga7ec69aa3720101b505e03c2f64758cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea3b9a72ed0bb7d9e02b0b301035c0a1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>&#160;&#160;&#160;0xdeadc0de</td></tr>
<tr class="memdesc:gaea3b9a72ed0bb7d9e02b0b301035c0a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Magic number stored as first field of all referenced objects.  <a href="#gaea3b9a72ed0bb7d9e02b0b301035c0a1">More...</a><br/></td></tr>
<tr class="separator:gaea3b9a72ed0bb7d9e02b0b301035c0a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0fbd2bea995f35a552a2a502e1119977"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>&#160;&#160;&#160;sizeof(struct <a class="el" href="structref__obj.html">ref_obj</a>);</td></tr>
<tr class="memdesc:ga0fbd2bea995f35a552a2a502e1119977"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of <a class="el" href="structref__obj.html" title="Internal structure of all referenced objects. ">ref_obj</a> is the offset for the data.  <a href="#ga0fbd2bea995f35a552a2a502e1119977">More...</a><br/></td></tr>
<tr class="separator:ga0fbd2bea995f35a552a2a502e1119977"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gafc47339e6afcf21aee4d5d6b8c48baea"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#gafc47339e6afcf21aee4d5d6b8c48baea">objdestroy</a> )(void *)</td></tr>
<tr class="memdesc:gafc47339e6afcf21aee4d5d6b8c48baea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback used to clean data of a reference object when it is to be freed.  <a href="#gafc47339e6afcf21aee4d5d6b8c48baea">More...</a><br/></td></tr>
<tr class="separator:gafc47339e6afcf21aee4d5d6b8c48baea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga21cf8972a38aed3f153f4ed06b12a419"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#ga21cf8972a38aed3f153f4ed06b12a419">objalloc</a> (int size, <a class="el" href="group___l_i_b-_o_b_j.html#gafc47339e6afcf21aee4d5d6b8c48baea">objdestroy</a> destructor)</td></tr>
<tr class="memdesc:ga21cf8972a38aed3f153f4ed06b12a419"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a referenced lockable object.  <a href="#ga21cf8972a38aed3f153f4ed06b12a419">More...</a><br/></td></tr>
<tr class="separator:ga21cf8972a38aed3f153f4ed06b12a419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a67a6d45e39f530beb6e45b6b7e7d3b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#ga3a67a6d45e39f530beb6e45b6b7e7d3b">objref</a> (void *data)</td></tr>
<tr class="memdesc:ga3a67a6d45e39f530beb6e45b6b7e7d3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference a object.  <a href="#ga3a67a6d45e39f530beb6e45b6b7e7d3b">More...</a><br/></td></tr>
<tr class="separator:ga3a67a6d45e39f530beb6e45b6b7e7d3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga88a966a194cdf36fe9b5be0917ce86d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#ga88a966a194cdf36fe9b5be0917ce86d9">objunref</a> (void *data)</td></tr>
<tr class="memdesc:ga88a966a194cdf36fe9b5be0917ce86d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop reference held.  <a href="#ga88a966a194cdf36fe9b5be0917ce86d9">More...</a><br/></td></tr>
<tr class="separator:ga88a966a194cdf36fe9b5be0917ce86d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaadae6dadb10585b603953ed7f1c530ba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#gaadae6dadb10585b603953ed7f1c530ba">objcnt</a> (void *data)</td></tr>
<tr class="memdesc:gaadae6dadb10585b603953ed7f1c530ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return current reference count.  <a href="#gaadae6dadb10585b603953ed7f1c530ba">More...</a><br/></td></tr>
<tr class="separator:gaadae6dadb10585b603953ed7f1c530ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96edfbac62564eb7424d8ed2dddfbe1b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#ga96edfbac62564eb7424d8ed2dddfbe1b">objsize</a> (void *data)</td></tr>
<tr class="memdesc:ga96edfbac62564eb7424d8ed2dddfbe1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size requested for data.  <a href="#ga96edfbac62564eb7424d8ed2dddfbe1b">More...</a><br/></td></tr>
<tr class="separator:ga96edfbac62564eb7424d8ed2dddfbe1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4af4ae14c4a3e9f3037a09237bcfeae3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#ga4af4ae14c4a3e9f3037a09237bcfeae3">objlock</a> (void *data)</td></tr>
<tr class="memdesc:ga4af4ae14c4a3e9f3037a09237bcfeae3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock the reference.  <a href="#ga4af4ae14c4a3e9f3037a09237bcfeae3">More...</a><br/></td></tr>
<tr class="separator:ga4af4ae14c4a3e9f3037a09237bcfeae3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb8f70e50130ab83c5f0eab4b96f72b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#gacb8f70e50130ab83c5f0eab4b96f72b5">objtrylock</a> (void *data)</td></tr>
<tr class="memdesc:gacb8f70e50130ab83c5f0eab4b96f72b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try lock a reference.  <a href="#gacb8f70e50130ab83c5f0eab4b96f72b5">More...</a><br/></td></tr>
<tr class="separator:gacb8f70e50130ab83c5f0eab4b96f72b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c73b68730aa4452357e84af27e00008"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#ga8c73b68730aa4452357e84af27e00008">objunlock</a> (void *data)</td></tr>
<tr class="memdesc:ga8c73b68730aa4452357e84af27e00008"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock a reference.  <a href="#ga8c73b68730aa4452357e84af27e00008">More...</a><br/></td></tr>
<tr class="separator:ga8c73b68730aa4452357e84af27e00008"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f31c0e1694ff10b71f6e655d8383b01"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_i_b-_o_b_j.html#ga6f31c0e1694ff10b71f6e655d8383b01">objchar</a> (const char *orig)</td></tr>
<tr class="memdesc:ga6f31c0e1694ff10b71f6e655d8383b01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a reference to copy of a buffer.  <a href="#ga6f31c0e1694ff10b71f6e655d8383b01">More...</a><br/></td></tr>
<tr class="separator:ga6f31c0e1694ff10b71f6e655d8383b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Utilities for managing referenced lockable objects. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="refobj.html">Referenced Lockable Objects</a> </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga0d5eb5885263228f57b0dba4dc8d90fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define clearflag</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">flag&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="group___l_i_b-_o_b_j.html#ga4af4ae14c4a3e9f3037a09237bcfeae3">objlock</a>(obj);\</div>
<div class="line">obj-&gt;flags &amp;= ~flag;<a class="code" href="group___l_i_b-_o_b_j.html#ga8c73b68730aa4452357e84af27e00008">\</a></div>
<div class="line"><a class="code" href="group___l_i_b-_o_b_j.html#ga8c73b68730aa4452357e84af27e00008">objunlock</a>(obj)</div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga4af4ae14c4a3e9f3037a09237bcfeae3"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga4af4ae14c4a3e9f3037a09237bcfeae3">objlock</a></div><div class="ttdeci">int objlock(void *data)</div><div class="ttdoc">Lock the reference. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00269">refobj.c:269</a></div></div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga8c73b68730aa4452357e84af27e00008"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga8c73b68730aa4452357e84af27e00008">objunlock</a></div><div class="ttdeci">int objunlock(void *data)</div><div class="ttdoc">Unlock a reference. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00301">refobj.c:301</a></div></div>
</div><!-- fragment -->
<p>Atomically clear a flag in the flags field of a referenced object. </p>

<p>Definition at line <a class="el" href="dtsapp_8h_source.html#l00918">918</a> of file <a class="el" href="dtsapp_8h_source.html">dtsapp.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7ec69aa3720101b505e03c2f64758cfe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DTS_OJBREF_CLASS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">classtype</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordtype">void</span> *<span class="keyword">operator</span> <span class="keyword">new</span>(<span class="keywordtype">size_t</span> sz) {\</div>
<div class="line">    return <a class="code" href="group___l_i_b-_o_b_j.html#ga21cf8972a38aed3f153f4ed06b12a419">objalloc</a>(sz, &amp;classtype::dts_unref_classtype);\</div>
<div class="line">}\</div>
<div class="line">void <span class="keyword">operator</span> <span class="keyword">delete</span>(<span class="keywordtype">void</span> *obj) {\</div>
<div class="line">}\</div>
<div class="line">static <span class="keywordtype">void</span> dts_unref_classtype(<span class="keywordtype">void</span> *data) {\</div>
<div class="line">    delete (classtype*)data;\</div>
<div class="line">}\</div>
<div class="line">~classtype()</div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga21cf8972a38aed3f153f4ed06b12a419"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga21cf8972a38aed3f153f4ed06b12a419">objalloc</a></div><div class="ttdeci">void * objalloc(int size, objdestroy)</div><div class="ttdoc">Allocate a referenced lockable object. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00129">refobj.c:129</a></div></div>
</div><!-- fragment -->
<p>Add this macro to a C++ class to add refobj support. </p>
<p>This macro defines operator overloads for new/delete and declares a destructor. </p>
<dl class="section note"><dt>Note</dt><dd>this should not be used with inheritance </dd></dl>

<p>Definition at line <a class="el" href="dtsapp_8h_source.html#l00976">976</a> of file <a class="el" href="dtsapp_8h_source.html">dtsapp.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaea3b9a72ed0bb7d9e02b0b301035c0a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REFOBJ_MAGIC&#160;&#160;&#160;0xdeadc0de</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Magic number stored as first field of all referenced objects. </p>

<p>Definition at line <a class="el" href="refobj_8c_source.html#l00034">34</a> of file <a class="el" href="refobj_8c_source.html">refobj.c</a>.</p>

<p>Referenced by <a class="el" href="group___l_i_b-_o_b_j.html#ga21cf8972a38aed3f153f4ed06b12a419">objalloc()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#gaadae6dadb10585b603953ed7f1c530ba">objcnt()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga4af4ae14c4a3e9f3037a09237bcfeae3">objlock()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga3a67a6d45e39f530beb6e45b6b7e7d3b">objref()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga96edfbac62564eb7424d8ed2dddfbe1b">objsize()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#gacb8f70e50130ab83c5f0eab4b96f72b5">objtrylock()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga8c73b68730aa4452357e84af27e00008">objunlock()</a>, and <a class="el" href="group___l_i_b-_o_b_j.html#ga88a966a194cdf36fe9b5be0917ce86d9">objunref()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0fbd2bea995f35a552a2a502e1119977"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define refobj_offset&#160;&#160;&#160;sizeof(struct <a class="el" href="structref__obj.html">ref_obj</a>);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The size of <a class="el" href="structref__obj.html" title="Internal structure of all referenced objects. ">ref_obj</a> is the offset for the data. </p>

<p>Definition at line <a class="el" href="refobj_8c_source.html#l00119">119</a> of file <a class="el" href="refobj_8c_source.html">refobj.c</a>.</p>

<p>Referenced by <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#ga63890af5b9f14017f9face6f7255a955">addtobucket()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga21cf8972a38aed3f153f4ed06b12a419">objalloc()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#gaadae6dadb10585b603953ed7f1c530ba">objcnt()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga4af4ae14c4a3e9f3037a09237bcfeae3">objlock()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga3a67a6d45e39f530beb6e45b6b7e7d3b">objref()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga96edfbac62564eb7424d8ed2dddfbe1b">objsize()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#gacb8f70e50130ab83c5f0eab4b96f72b5">objtrylock()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga8c73b68730aa4452357e84af27e00008">objunlock()</a>, and <a class="el" href="group___l_i_b-_o_b_j.html#ga88a966a194cdf36fe9b5be0917ce86d9">objunref()</a>.</p>

</div>
</div>
<a class="anchor" id="gad2acae829630a5df6b23d108520c71c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define setflag</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">flag&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="group___l_i_b-_o_b_j.html#ga4af4ae14c4a3e9f3037a09237bcfeae3">objlock</a>(obj);\</div>
<div class="line">obj-&gt;flags |= flag; <a class="code" href="group___l_i_b-_o_b_j.html#ga8c73b68730aa4452357e84af27e00008">\</a></div>
<div class="line"><a class="code" href="group___l_i_b-_o_b_j.html#ga8c73b68730aa4452357e84af27e00008">objunlock</a>(obj)</div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga4af4ae14c4a3e9f3037a09237bcfeae3"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga4af4ae14c4a3e9f3037a09237bcfeae3">objlock</a></div><div class="ttdeci">int objlock(void *data)</div><div class="ttdoc">Lock the reference. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00269">refobj.c:269</a></div></div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga8c73b68730aa4452357e84af27e00008"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga8c73b68730aa4452357e84af27e00008">objunlock</a></div><div class="ttdeci">int objunlock(void *data)</div><div class="ttdoc">Unlock a reference. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00301">refobj.c:301</a></div></div>
</div><!-- fragment -->
<p>Atomically set a flag in the flags field of a referenced object. </p>

<p>Definition at line <a class="el" href="dtsapp_8h_source.html#l00925">925</a> of file <a class="el" href="dtsapp_8h_source.html">dtsapp.h</a>.</p>

<p>Referenced by <a class="el" href="group___l_i_b-_sock.html#gae2172d725d57ad6446229c480f907dc7">close_socket()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#ga33b9cd3accd2f74148002c9c74c445ef">dtls_listenssl()</a>, <a class="el" href="group___l_i_b-_thread.html#ga810e4f7679b9091b76c1976ea1e56371">framework_mkthread()</a>, <a class="el" href="group___l_i_b-_thread.html#ga37cee7918b353012cfaf548d7aa6ba44">jointhreads()</a>, <a class="el" href="group___l_i_b-_n_f-_c_t.html#gaf31092fdacc01de009db4f995ecb24be">nf_ctrack_endtrace()</a>, <a class="el" href="group___l_i_b-_sock.html#ga5243da7cf32d5d6e2c53489b1abaa5f3">socketwrite_d()</a>, <a class="el" href="group___l_i_b-_thread.html#gab7bd2e1994fcde659e4188982c34cdd6">stopthreads()</a>, and <a class="el" href="group___l_i_b-_sock-_s_s_l.html#gaf68b24a67ab082fa0e509a006499e89d">tlsaccept()</a>.</p>

</div>
</div>
<a class="anchor" id="gaaf8bc071257e95e30652a7b211b61315"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define testflag</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">flag&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(<a class="el" href="group___l_i_b-_o_b_j.html#ga4af4ae14c4a3e9f3037a09237bcfeae3">objlock</a>(obj) | (obj-&gt;flags &amp; flag) | <a class="el" href="group___l_i_b-_o_b_j.html#ga8c73b68730aa4452357e84af27e00008">objunlock</a>(obj))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically test a flag in the flags field of a referenced object. </p>

<p>Definition at line <a class="el" href="dtsapp_8h_source.html#l00932">932</a> of file <a class="el" href="dtsapp_8h_source.html">dtsapp.h</a>.</p>

<p>Referenced by <a class="el" href="group___l_i_b-_thread.html#ga810e4f7679b9091b76c1976ea1e56371">framework_mkthread()</a>, <a class="el" href="group___l_i_b-_thread.html#ga353bdf95751aa5ab798091ffd907892e">framework_threadok()</a>, <a class="el" href="group___l_i_b-_sock.html#ga8dc9b8c4a861709be1b3fb2d105e5f8f">socketread_d()</a>, and <a class="el" href="group___l_i_b-_sock.html#ga5243da7cf32d5d6e2c53489b1abaa5f3">socketwrite_d()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gafc47339e6afcf21aee4d5d6b8c48baea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* objdestroy)(void *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback used to clean data of a reference object when it is to be freed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Data held by reference about to be freed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dtsapp_8h_source.html#l00264">264</a> of file <a class="el" href="dtsapp_8h_source.html">dtsapp.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga21cf8972a38aed3f153f4ed06b12a419"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* objalloc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___l_i_b-_o_b_j.html#gafc47339e6afcf21aee4d5d6b8c48baea">objdestroy</a>&#160;</td>
          <td class="paramname"><em>destructor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a referenced lockable object. </p>
<p>Use malloc to allocate memory to contain the data lock and reference the lock is initialised magic and reference set. The data begins at the end of the <a class="el" href="structref__obj.html" title="Internal structure of all referenced objects. ">ref_obj</a> set a pointer to it and return. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Size of the data buffer to allocate in addition to the reference. </td></tr>
    <tr><td class="paramname">destructor</td><td>Function called before the memory is freed to cleanup. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to a data buffer size big. </dd></dl>

<p>Definition at line <a class="el" href="refobj_8c_source.html#l00129">129</a> of file <a class="el" href="refobj_8c_source.html">refobj.c</a>.</p>

<p>References <a class="el" href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">ref_obj::cnt</a>, <a class="el" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a>, <a class="el" href="structref__obj.html#a57d9b7cd22f5680beb35e00d31bc9fc5">ref_obj::destroy</a>, <a class="el" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a>, <a class="el" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a>, <a class="el" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>, and <a class="el" href="structref__obj.html#ab77479cff3d660fbd7af49c237975b1c">ref_obj::size</a>.</p>

<p>Referenced by <a class="el" href="group___l_i_b-_sock.html#gae6766012a1d374280a44c7d33cd88290">accept_socket()</a>, <a class="el" href="group___l_i_b-_r_a_d_i_u_s.html#ga82fdb4e06174c84d7fe8c28f5d903dd4">add_radserver()</a>, <a class="el" href="group___l_i_b-_util.html#ga175ed23434d1c0b56ed40d09984d11a8">b64enc_buf()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#ga504545b538666017fe0d41e428310341">create_bucketlist()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gae4744405b8a043979aa4ea1cfde174ef">create_kernmac()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gad4b0322139d45ba2b60e21a639fa9c29">create_kernvlan()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#gafec30318425542909ab956159fe0a08f">curl_newauth()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#ga8c73e5cb2a4773c9b79b56e4e6d69caf">curl_newpost()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#gae187af55948eae8d0319de9fd955d519">curl_setauth_cb()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#gacb39882769c9cec0d27ba2b0894701b7">curl_setprogress()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#ga9164da7e395ee6c92f7dfdc68e9bf594">curlinit()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#ga33b9cd3accd2f74148002c9c74c445ef">dtls_listenssl()</a>, <a class="el" href="group___l_i_b.html#gaec2d2872af6e5a3bc1d39f5837173023">framework_mkcore()</a>, <a class="el" href="group___l_i_b-_thread.html#ga810e4f7679b9091b76c1976ea1e56371">framework_mkthread()</a>, <a class="el" href="group___l_i_b-_w_i_n32.html#ga876bea852d2100679d861b5b321b6ec7">get_ifinfo()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#gaf05994d11e28a40271f80db3f3668852">init_bucket_loop()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#gafce6d8814b3bdf793cabb6fcc2f79833">ldap_addinit()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga03ad7ee259ae4078e34f4852ef4b0ac9">ldap_connect()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga9abb041462703514fe1ed59a071bf688">ldap_modifyinit()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga6437cd7bc7686cae2d851cd060cb1f4e">ldap_saslbind()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga8cfa6cffc3d103b3744c22fbca969b22">ldap_simplebind()</a>, <a class="el" href="group___l_i_b-_sock.html#gaa03b1cc30d7c0a8b82ec5ee643a95a20">make_socket()</a>, <a class="el" href="group___l_i_b-_n_f-_q.html#ga6a52ad68b657707bb0657a76e1db96ed">nfqueue_attach()</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga6f31c0e1694ff10b71f6e655d8383b01">objchar()</a>, <a class="el" href="group___l_i_b-_n_a_t6.html#ga6c761d18183be3df327a2a1d9bc0bfa9">rfc6296_map_add()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga67dcdb7d1138121755d36d6e3f9e7196">set_interface_addr()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga483fe40be559db7e6c35d1fac39f4951">set_interface_flags()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga2f3e0de7dc564bb0a51656e0be0d82df">set_interface_ipaddr()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gaf84e9152d0c6c803c75b6f47772a22ba">set_interface_name()</a>, <a class="el" href="group___l_i_b-_thread.html#ga5196903ef5e3e656b28c52e045f7c3f3">startthreads()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#gaf68b24a67ab082fa0e509a006499e89d">tlsaccept()</a>, <a class="el" href="group___l_i_b-_sock-_unix.html#ga9fe98a54d1e9ab578c98b109a3971900">unixsocket_server()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga0a819c7f1e5f77b6e45257094f7bfe03">xml_doctobuffer()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaefe8651371b2172192b4ce8588fc3968">xml_getfirstnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaef681de6dc96aa7b531652f85b697f90">xml_init()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaada81bc87913891f55c310a2c4883037">xml_loadbuf()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gac174e9b8be0495cd4a4a1a299905054e">xml_loaddoc()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga666fda2454f2ccd2673439cdb23caa93">xml_xpath()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga734f1d4ec878a7ae1a50576ee91eef90">xslt_addparam()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga136e5953ac0e97166bdba3323f6787ef">xslt_apply_buffer()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#gadb14be61d16b89994eb80f5bce026cfe">xslt_init()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#gae4e57cd34418965c1fb559cee95c4496">xslt_open()</a>, and <a class="el" href="group___l_i_b-_z.html#gaa68a092be2ac84696ae97c6516477e87">zcompress()</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                                                      {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *ref;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordtype">int</span> asize;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordtype">char</span> *robj;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    asize  = <a class="code" href="structref__obj.html#ab77479cff3d660fbd7af49c237975b1c">size</a> + <a class="code" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> ((robj = malloc(asize))) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        memset(robj, 0, asize);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        ref = (<span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *)robj;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        pthread_mutex_init(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>, NULL);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        ref-&gt;<a class="code" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">magic</a> = <a class="code" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        ref-&gt;<a class="code" href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">cnt</a> = 1;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        ref-&gt;<a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a> = robj + <a class="code" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        ref-&gt;<a class="code" href="structref__obj.html#ab77479cff3d660fbd7af49c237975b1c">size</a> = asize;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        ref-&gt;<a class="code" href="structref__obj.html#a57d9b7cd22f5680beb35e00d31bc9fc5">destroy</a> = destructor;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">return</span> (ref-&gt;<a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga0fbd2bea995f35a552a2a502e1119977"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a></div><div class="ttdeci">#define refobj_offset</div><div class="ttdoc">The size of ref_obj is the offset for the data. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00119">refobj.c:119</a></div></div>
<div class="ttc" id="structref__obj_html_a57d9b7cd22f5680beb35e00d31bc9fc5"><div class="ttname"><a href="structref__obj.html#a57d9b7cd22f5680beb35e00d31bc9fc5">ref_obj::destroy</a></div><div class="ttdeci">objdestroy destroy</div><div class="ttdoc">Function to call to clean up the data before its freed. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00052">refobj.c:52</a></div></div>
<div class="ttc" id="structref__obj_html"><div class="ttname"><a href="structref__obj.html">ref_obj</a></div><div class="ttdoc">Internal structure of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00038">refobj.c:38</a></div></div>
<div class="ttc" id="structref__obj_html_a4725a0b14472b6571c3901ccc71bae08"><div class="ttname"><a href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">Pointer to the data referenced. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00054">refobj.c:54</a></div></div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_gaea3b9a72ed0bb7d9e02b0b301035c0a1"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a></div><div class="ttdeci">#define REFOBJ_MAGIC</div><div class="ttdoc">Magic number stored as first field of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00034">refobj.c:34</a></div></div>
<div class="ttc" id="structref__obj_html_ab77479cff3d660fbd7af49c237975b1c"><div class="ttname"><a href="structref__obj.html#ab77479cff3d660fbd7af49c237975b1c">ref_obj::size</a></div><div class="ttdeci">size_t size</div><div class="ttdoc">The size allocated to this object. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00048">refobj.c:48</a></div></div>
<div class="ttc" id="structref__obj_html_a31084d3309cb4bed56ac592d0a29e3e5"><div class="ttname"><a href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdoc">Memory integrity check used to prevent non refeferenced objects been handled as referenced objects...</div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00042">refobj.c:42</a></div></div>
<div class="ttc" id="structref__obj_html_a9f9b349333420bc708187ef7fd7f0984"><div class="ttname"><a href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">ref_obj::cnt</a></div><div class="ttdeci">uint32_t cnt</div><div class="ttdoc">Reference count the oject will be freed when the reference count reaches 0. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00045">refobj.c:45</a></div></div>
<div class="ttc" id="structref__obj_html_a63af58e8d5b98a6f9d8fba0f335e889d"><div class="ttname"><a href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdoc">this is a pointer to the lock it may be changed to be the lock </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00050">refobj.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga6f31c0e1694ff10b71f6e655d8383b01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* objchar </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>orig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a reference to copy of a buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">orig</td><td>Original buffer to copy. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Reference to new instance of orig. </dd></dl>

<p>Definition at line <a class="el" href="refobj_8c_source.html#l00330">330</a> of file <a class="el" href="refobj_8c_source.html">refobj.c</a>.</p>

<p>References <a class="el" href="group___l_i_b-_o_b_j.html#ga21cf8972a38aed3f153f4ed06b12a419">objalloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                                       {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordtype">int</span> len = strlen(orig) + 1;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordtype">void</span> *nobj;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span> ((nobj = <a class="code" href="group___l_i_b-_o_b_j.html#ga21cf8972a38aed3f153f4ed06b12a419">objalloc</a>(len, NULL))) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        memcpy(nobj, orig, len);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">return</span> nobj;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga21cf8972a38aed3f153f4ed06b12a419"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga21cf8972a38aed3f153f4ed06b12a419">objalloc</a></div><div class="ttdeci">void * objalloc(int size, objdestroy)</div><div class="ttdoc">Allocate a referenced lockable object. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00129">refobj.c:129</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaadae6dadb10585b603953ed7f1c530ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int objcnt </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return current reference count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Pointer to determine active reference count. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error or the current count. </dd></dl>

<p>Definition at line <a class="el" href="refobj_8c_source.html#l00222">222</a> of file <a class="el" href="refobj_8c_source.html">refobj.c</a>.</p>

<p>References <a class="el" href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">ref_obj::cnt</a>, <a class="el" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a>, <a class="el" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a>, <a class="el" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a>, <a class="el" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>, and <a class="el" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>.</p>

<p>Referenced by <a class="el" href="group___l_i_b-_l_d_a_p.html#ga9259d04f5cd09ec2bf0f96c904976f5e">ldap_unref_attr()</a>, and <a class="el" href="group___l_i_b-_l_d_a_p.html#ga293cb196f673abba19c663a64c0943f4">ldap_unref_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                              {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">char</span> *ptr = <a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordtype">int</span> ret = -1;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *ref;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a>) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">return</span> (ret);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    ptr = ptr - <a class="code" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    ref = (<span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *)ptr;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (ref-&gt;<a class="code" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">magic</a> == <a class="code" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        pthread_mutex_lock(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        ret = ref-&gt;<a class="code" href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">cnt</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        pthread_mutex_unlock(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> (ret);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga0fbd2bea995f35a552a2a502e1119977"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a></div><div class="ttdeci">#define refobj_offset</div><div class="ttdoc">The size of ref_obj is the offset for the data. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00119">refobj.c:119</a></div></div>
<div class="ttc" id="structref__obj_html"><div class="ttname"><a href="structref__obj.html">ref_obj</a></div><div class="ttdoc">Internal structure of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00038">refobj.c:38</a></div></div>
<div class="ttc" id="structref__obj_html_a4725a0b14472b6571c3901ccc71bae08"><div class="ttname"><a href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">Pointer to the data referenced. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00054">refobj.c:54</a></div></div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_gaea3b9a72ed0bb7d9e02b0b301035c0a1"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a></div><div class="ttdeci">#define REFOBJ_MAGIC</div><div class="ttdoc">Magic number stored as first field of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00034">refobj.c:34</a></div></div>
<div class="ttc" id="structref__obj_html_a31084d3309cb4bed56ac592d0a29e3e5"><div class="ttname"><a href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdoc">Memory integrity check used to prevent non refeferenced objects been handled as referenced objects...</div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00042">refobj.c:42</a></div></div>
<div class="ttc" id="structref__obj_html_a9f9b349333420bc708187ef7fd7f0984"><div class="ttname"><a href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">ref_obj::cnt</a></div><div class="ttdeci">uint32_t cnt</div><div class="ttdoc">Reference count the oject will be freed when the reference count reaches 0. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00045">refobj.c:45</a></div></div>
<div class="ttc" id="structref__obj_html_a63af58e8d5b98a6f9d8fba0f335e889d"><div class="ttname"><a href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdoc">this is a pointer to the lock it may be changed to be the lock </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00050">refobj.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga4af4ae14c4a3e9f3037a09237bcfeae3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int objlock </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lock the reference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Reference to lock </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns 0 will only lock if a valid object. </dd></dl>

<p>Definition at line <a class="el" href="refobj_8c_source.html#l00269">269</a> of file <a class="el" href="refobj_8c_source.html">refobj.c</a>.</p>

<p>References <a class="el" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a>, <a class="el" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a>, <a class="el" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a>, <a class="el" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>, and <a class="el" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>.</p>

<p>Referenced by <a class="el" href="group___l_i_b-_sock.html#gae6766012a1d374280a44c7d33cd88290">accept_socket()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#ga63890af5b9f14017f9face6f7255a955">addtobucket()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#gaf312a26de37ad9594212c466a706c776">bucket_list_cnt()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gae4744405b8a043979aa4ea1cfde174ef">create_kernmac()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gad4b0322139d45ba2b60e21a639fa9c29">create_kernvlan()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#ga3e62aea1a0929d16b4b4b10572c0b0dc">curl_postitem()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#ga9164da7e395ee6c92f7dfdc68e9bf594">curlinit()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#ga33b9cd3accd2f74148002c9c74c445ef">dtls_listenssl()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#ga42b05e8436cda43d1902250d55b1f738">dtlshandltimeout()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#ga67e51a32a07060fc9bbfa0f6290d471b">dtlstimeout()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#ga16236c11af0004eedd1ed319b6aea38e">dtsl_serveropts()</a>, <a class="el" href="group___l_i_b-_thread.html#ga810e4f7679b9091b76c1976ea1e56371">framework_mkthread()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gaac00b68e6c4511caf1bb4f71596b8913">get_iface_index()</a>, <a class="el" href="group___l_i_b-_thread.html#ga37cee7918b353012cfaf548d7aa6ba44">jointhreads()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#gafb3a53624d50c15f8660fd5e310bfe07">ldap_doadd()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga879a8a9934154de3e8ea1613ebc82ac1">ldap_domodify()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga6437cd7bc7686cae2d851cd060cb1f4e">ldap_saslbind()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga8cfa6cffc3d103b3744c22fbca969b22">ldap_simplebind()</a>, <a class="el" href="group___l_i_b-_n_f-_c_t.html#gaf523d6cd683928e6e788f8b668ff23cd">nf_ctrack_delete()</a>, <a class="el" href="group___l_i_b-_n_f-_c_t.html#ga8a3b7e4a28aab8ae7d4d0727d190c4d6">nf_ctrack_dump()</a>, <a class="el" href="group___l_i_b-_n_f-_c_t.html#ga59780f7ba2bb38f87665952841900419">nf_ctrack_nat()</a>, <a class="el" href="group___l_i_b-_n_f-_q.html#ga6a52ad68b657707bb0657a76e1db96ed">nfqueue_attach()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#ga610e2d3a459838f394de26e8d1320253">remove_bucket_item()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#gaab57f98566f9886d20cfa6229bd163a0">remove_bucket_loop()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga67dcdb7d1138121755d36d6e3f9e7196">set_interface_addr()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga483fe40be559db7e6c35d1fac39f4951">set_interface_flags()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga2f3e0de7dc564bb0a51656e0be0d82df">set_interface_ipaddr()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gaf84e9152d0c6c803c75b6f47772a22ba">set_interface_name()</a>, <a class="el" href="group___l_i_b-_sock.html#ga8dc9b8c4a861709be1b3fb2d105e5f8f">socketread_d()</a>, <a class="el" href="group___l_i_b-_sock.html#ga4c08ae54e4e2d9ae7fa2f3a3a17a2e81">socketserver()</a>, <a class="el" href="group___l_i_b-_sock.html#ga5243da7cf32d5d6e2c53489b1abaa5f3">socketwrite_d()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#gae9827cd82c92fbbf863021671716d3f9">ssl_shutdown()</a>, <a class="el" href="group___l_i_b-_thread.html#gab7bd2e1994fcde659e4188982c34cdd6">stopthreads()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#ga52bd70f08418e41b956872c13814a090">url_escape()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#gad933393278466229d2a14828a4df593d">url_unescape()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaef3b0af8bc75592482ce55e3875afcd8">xml_addnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga6f8b3923d80a744c81b09b819bfd7f07">xml_appendnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gada9bfbed07f75b8f8e8f5edca677a831">xml_createpath()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga5f59b78a8b5cdfe2d376c50368da43de">xml_delete()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga0a819c7f1e5f77b6e45257094f7bfe03">xml_doctobuffer()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaefe8651371b2172192b4ce8588fc3968">xml_getfirstnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gac945eb0741d11973ff122d646be3b32a">xml_getnextnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga35ac563dc4eed070de5d208ba91ba82b">xml_getrootnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gadae350bf1d06cee606661e62d5946ca4">xml_modify()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga497612a3ec78c3c868422359f2ef3f8b">xml_savefile()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gae0d21677f3da1488963d46cc2d6b5c0c">xml_setattr()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga98117200ad77cd4925785d6fc0efb38d">xml_unlink()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga666fda2454f2ccd2673439cdb23caa93">xml_xpath()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga734f1d4ec878a7ae1a50576ee91eef90">xslt_addparam()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga85e429d38a79ac5398a7f3366c88716c">xslt_apply()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga136e5953ac0e97166bdba3323f6787ef">xslt_apply_buffer()</a>, and <a class="el" href="group___l_i_b-_x_s_l_t.html#ga8fb842b8c9126530b5f1da64c388c443">xslt_clearparam()</a>.</p>
<div class="fragment"><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                               {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordtype">char</span> *ptr = <a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *ref;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    ptr = ptr - <a class="code" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    ref = (<span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *)ptr;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a> &amp;&amp; ref-&gt;<a class="code" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">magic</a> == <a class="code" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        pthread_mutex_lock(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">return</span> (0);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga0fbd2bea995f35a552a2a502e1119977"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a></div><div class="ttdeci">#define refobj_offset</div><div class="ttdoc">The size of ref_obj is the offset for the data. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00119">refobj.c:119</a></div></div>
<div class="ttc" id="structref__obj_html"><div class="ttname"><a href="structref__obj.html">ref_obj</a></div><div class="ttdoc">Internal structure of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00038">refobj.c:38</a></div></div>
<div class="ttc" id="structref__obj_html_a4725a0b14472b6571c3901ccc71bae08"><div class="ttname"><a href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">Pointer to the data referenced. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00054">refobj.c:54</a></div></div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_gaea3b9a72ed0bb7d9e02b0b301035c0a1"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a></div><div class="ttdeci">#define REFOBJ_MAGIC</div><div class="ttdoc">Magic number stored as first field of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00034">refobj.c:34</a></div></div>
<div class="ttc" id="structref__obj_html_a31084d3309cb4bed56ac592d0a29e3e5"><div class="ttname"><a href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdoc">Memory integrity check used to prevent non refeferenced objects been handled as referenced objects...</div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00042">refobj.c:42</a></div></div>
<div class="ttc" id="structref__obj_html_a63af58e8d5b98a6f9d8fba0f335e889d"><div class="ttname"><a href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdoc">this is a pointer to the lock it may be changed to be the lock </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00050">refobj.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga3a67a6d45e39f530beb6e45b6b7e7d3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int objref </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reference a object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Data to obtain reference for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on error or the current count (after incrementing) </dd></dl>

<p>Definition at line <a class="el" href="refobj_8c_source.html#l00153">153</a> of file <a class="el" href="refobj_8c_source.html">refobj.c</a>.</p>

<p>References <a class="el" href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">ref_obj::cnt</a>, <a class="el" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a>, <a class="el" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a>, <a class="el" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a>, <a class="el" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>, and <a class="el" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>.</p>

<p>Referenced by <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#ga63890af5b9f14017f9face6f7255a955">addtobucket()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#gadcbb1534c836ba15aa2acf066bd5fff7">bucket_list_find_key()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gae4744405b8a043979aa4ea1cfde174ef">create_kernmac()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gad4b0322139d45ba2b60e21a639fa9c29">create_kernvlan()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#gae187af55948eae8d0319de9fd955d519">curl_setauth_cb()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#gacb39882769c9cec0d27ba2b0894701b7">curl_setprogress()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#ga9164da7e395ee6c92f7dfdc68e9bf594">curlinit()</a>, <a class="el" href="group___l_i_b.html#ga2cbddb1a87e905e7d016b74657758d4d">framework_init()</a>, <a class="el" href="group___l_i_b-_thread.html#ga810e4f7679b9091b76c1976ea1e56371">framework_mkthread()</a>, <a class="el" href="group___l_i_b-_i_n_i.html#gacda25f5961b62c5de343589c3a72b771">get_category_next()</a>, <a class="el" href="group___l_i_b-_i_n_i.html#ga86c44d5b975637cbf0a84e034a4c3d1e">get_config_category()</a>, <a class="el" href="group___l_i_b-_i_n_i.html#gaa3e89f20af266ba0c27f389645246390">get_config_file()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gaac00b68e6c4511caf1bb4f71596b8913">get_iface_index()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga435f9d4ee54e7cbcd15b2f196cedf3e1">ifhwaddr()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#gaf05994d11e28a40271f80db3f3668852">init_bucket_loop()</a>, <a class="el" href="group___l_i_b-_thread.html#ga37cee7918b353012cfaf548d7aa6ba44">jointhreads()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga879a8a9934154de3e8ea1613ebc82ac1">ldap_domodify()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga6437cd7bc7686cae2d851cd060cb1f4e">ldap_saslbind()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga8cfa6cffc3d103b3744c22fbca969b22">ldap_simplebind()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga511bc5a9f787d72bee5d47d0e4af7f2d">ldap_simplerebind()</a>, <a class="el" href="group___l_i_b-_sock-_m_c_a_s_t.html#gab975db17c51345320346da0a8abc3750">mcast_socket()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#ga4dfa18d64062aae420d9d7ab1c9943d7">next_bucket_loop()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga67dcdb7d1138121755d36d6e3f9e7196">set_interface_addr()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga483fe40be559db7e6c35d1fac39f4951">set_interface_flags()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga2f3e0de7dc564bb0a51656e0be0d82df">set_interface_ipaddr()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gaf84e9152d0c6c803c75b6f47772a22ba">set_interface_name()</a>, <a class="el" href="group___l_i_b-_thread.html#ga5196903ef5e3e656b28c52e045f7c3f3">startthreads()</a>, <a class="el" href="group___l_i_b-_thread.html#gab7bd2e1994fcde659e4188982c34cdd6">stopthreads()</a>, <a class="el" href="group___l_i_b-_sock-_unix.html#gac55bd1419f27dce6b1b8ccd5e6490d12">unixsocket_client()</a>, <a class="el" href="group___l_i_b-_sock-_unix.html#ga9fe98a54d1e9ab578c98b109a3971900">unixsocket_server()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaef3b0af8bc75592482ce55e3875afcd8">xml_addnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga6f8b3923d80a744c81b09b819bfd7f07">xml_appendnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gada9bfbed07f75b8f8e8f5edca677a831">xml_createpath()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaefe8651371b2172192b4ce8588fc3968">xml_getfirstnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gac945eb0741d11973ff122d646be3b32a">xml_getnextnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga093f4090de686322e660226077a1bb86">xml_getnodes()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaef681de6dc96aa7b531652f85b697f90">xml_init()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga666fda2454f2ccd2673439cdb23caa93">xml_xpath()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga734f1d4ec878a7ae1a50576ee91eef90">xslt_addparam()</a>, and <a class="el" href="group___l_i_b-_x_s_l_t.html#gadb14be61d16b89994eb80f5bce026cfe">xslt_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                              {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordtype">char</span> *ptr = <a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *ref;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    ptr = ptr - <a class="code" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    ref = (<span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *)ptr;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a> || !ref || (ref-&gt;<a class="code" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">magic</a> != <a class="code" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>)) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">return</span> (ret);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">/*double check just incase im gone*/</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span> (!pthread_mutex_lock(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>)) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">if</span> ((ref-&gt;<a class="code" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">magic</a> == <a class="code" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>) &amp;&amp; (ref-&gt;<a class="code" href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">cnt</a> &gt; 0)) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            ref-&gt;<a class="code" href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">cnt</a>++;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            ret = ref-&gt;<a class="code" href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">cnt</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        pthread_mutex_unlock(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> (ret);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga0fbd2bea995f35a552a2a502e1119977"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a></div><div class="ttdeci">#define refobj_offset</div><div class="ttdoc">The size of ref_obj is the offset for the data. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00119">refobj.c:119</a></div></div>
<div class="ttc" id="structref__obj_html"><div class="ttname"><a href="structref__obj.html">ref_obj</a></div><div class="ttdoc">Internal structure of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00038">refobj.c:38</a></div></div>
<div class="ttc" id="structref__obj_html_a4725a0b14472b6571c3901ccc71bae08"><div class="ttname"><a href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">Pointer to the data referenced. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00054">refobj.c:54</a></div></div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_gaea3b9a72ed0bb7d9e02b0b301035c0a1"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a></div><div class="ttdeci">#define REFOBJ_MAGIC</div><div class="ttdoc">Magic number stored as first field of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00034">refobj.c:34</a></div></div>
<div class="ttc" id="structref__obj_html_a31084d3309cb4bed56ac592d0a29e3e5"><div class="ttname"><a href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdoc">Memory integrity check used to prevent non refeferenced objects been handled as referenced objects...</div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00042">refobj.c:42</a></div></div>
<div class="ttc" id="structref__obj_html_a9f9b349333420bc708187ef7fd7f0984"><div class="ttname"><a href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">ref_obj::cnt</a></div><div class="ttdeci">uint32_t cnt</div><div class="ttdoc">Reference count the oject will be freed when the reference count reaches 0. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00045">refobj.c:45</a></div></div>
<div class="ttc" id="structref__obj_html_a63af58e8d5b98a6f9d8fba0f335e889d"><div class="ttname"><a href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdoc">this is a pointer to the lock it may be changed to be the lock </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00050">refobj.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga96edfbac62564eb7424d8ed2dddfbe1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int objsize </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size requested for data. </p>
<dl class="section note"><dt>Note</dt><dd>the size of the data is returned. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Pointer to data to obtain size of. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size requested for allocation not allocation [excludes refobj]. </dd></dl>

<p>Definition at line <a class="el" href="refobj_8c_source.html#l00246">246</a> of file <a class="el" href="refobj_8c_source.html">refobj.c</a>.</p>

<p>References <a class="el" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a>, <a class="el" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a>, <a class="el" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a>, <a class="el" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>, and <a class="el" href="structref__obj.html#ab77479cff3d660fbd7af49c237975b1c">ref_obj::size</a>.</p>
<div class="fragment"><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                               {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">char</span> *ptr = <a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *ref;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a>) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">return</span> (ret);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    ptr = ptr - <a class="code" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    ref = (<span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *)ptr;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (ref-&gt;<a class="code" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">magic</a> == <a class="code" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        pthread_mutex_lock(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        ret = ref-&gt;<a class="code" href="structref__obj.html#ab77479cff3d660fbd7af49c237975b1c">size</a> - <a class="code" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        pthread_mutex_unlock(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span> (ret);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga0fbd2bea995f35a552a2a502e1119977"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a></div><div class="ttdeci">#define refobj_offset</div><div class="ttdoc">The size of ref_obj is the offset for the data. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00119">refobj.c:119</a></div></div>
<div class="ttc" id="structref__obj_html"><div class="ttname"><a href="structref__obj.html">ref_obj</a></div><div class="ttdoc">Internal structure of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00038">refobj.c:38</a></div></div>
<div class="ttc" id="structref__obj_html_a4725a0b14472b6571c3901ccc71bae08"><div class="ttname"><a href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">Pointer to the data referenced. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00054">refobj.c:54</a></div></div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_gaea3b9a72ed0bb7d9e02b0b301035c0a1"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a></div><div class="ttdeci">#define REFOBJ_MAGIC</div><div class="ttdoc">Magic number stored as first field of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00034">refobj.c:34</a></div></div>
<div class="ttc" id="structref__obj_html_ab77479cff3d660fbd7af49c237975b1c"><div class="ttname"><a href="structref__obj.html#ab77479cff3d660fbd7af49c237975b1c">ref_obj::size</a></div><div class="ttdeci">size_t size</div><div class="ttdoc">The size allocated to this object. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00048">refobj.c:48</a></div></div>
<div class="ttc" id="structref__obj_html_a31084d3309cb4bed56ac592d0a29e3e5"><div class="ttname"><a href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdoc">Memory integrity check used to prevent non refeferenced objects been handled as referenced objects...</div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00042">refobj.c:42</a></div></div>
<div class="ttc" id="structref__obj_html_a63af58e8d5b98a6f9d8fba0f335e889d"><div class="ttname"><a href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdoc">this is a pointer to the lock it may be changed to be the lock </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00050">refobj.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gacb8f70e50130ab83c5f0eab4b96f72b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int objtrylock </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try lock a reference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Reference to attempt to lock. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success -1 on failure. </dd></dl>

<p>Definition at line <a class="el" href="refobj_8c_source.html#l00285">285</a> of file <a class="el" href="refobj_8c_source.html">refobj.c</a>.</p>

<p>References <a class="el" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a>, <a class="el" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a>, <a class="el" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a>, <a class="el" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>, and <a class="el" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>.</p>
<div class="fragment"><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                  {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">char</span> *ptr = <a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *ref;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    ptr = ptr - <a class="code" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    ref = (<span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *)ptr;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (ref-&gt;<a class="code" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">magic</a> == <a class="code" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">return</span> ((pthread_mutex_trylock(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>)) ? -1 : 0);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> (-1);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga0fbd2bea995f35a552a2a502e1119977"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a></div><div class="ttdeci">#define refobj_offset</div><div class="ttdoc">The size of ref_obj is the offset for the data. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00119">refobj.c:119</a></div></div>
<div class="ttc" id="structref__obj_html"><div class="ttname"><a href="structref__obj.html">ref_obj</a></div><div class="ttdoc">Internal structure of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00038">refobj.c:38</a></div></div>
<div class="ttc" id="structref__obj_html_a4725a0b14472b6571c3901ccc71bae08"><div class="ttname"><a href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">Pointer to the data referenced. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00054">refobj.c:54</a></div></div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_gaea3b9a72ed0bb7d9e02b0b301035c0a1"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a></div><div class="ttdeci">#define REFOBJ_MAGIC</div><div class="ttdoc">Magic number stored as first field of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00034">refobj.c:34</a></div></div>
<div class="ttc" id="structref__obj_html_a31084d3309cb4bed56ac592d0a29e3e5"><div class="ttname"><a href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdoc">Memory integrity check used to prevent non refeferenced objects been handled as referenced objects...</div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00042">refobj.c:42</a></div></div>
<div class="ttc" id="structref__obj_html_a63af58e8d5b98a6f9d8fba0f335e889d"><div class="ttname"><a href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdoc">this is a pointer to the lock it may be changed to be the lock </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00050">refobj.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga8c73b68730aa4452357e84af27e00008"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int objunlock </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock a reference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Reference to unlock. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns 0. </dd></dl>

<p>Definition at line <a class="el" href="refobj_8c_source.html#l00301">301</a> of file <a class="el" href="refobj_8c_source.html">refobj.c</a>.</p>

<p>References <a class="el" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a>, <a class="el" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a>, <a class="el" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a>, <a class="el" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>, and <a class="el" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>.</p>

<p>Referenced by <a class="el" href="group___l_i_b-_sock.html#gae6766012a1d374280a44c7d33cd88290">accept_socket()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#ga63890af5b9f14017f9face6f7255a955">addtobucket()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#gaf312a26de37ad9594212c466a706c776">bucket_list_cnt()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gae4744405b8a043979aa4ea1cfde174ef">create_kernmac()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gad4b0322139d45ba2b60e21a639fa9c29">create_kernvlan()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#ga3e62aea1a0929d16b4b4b10572c0b0dc">curl_postitem()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#ga9164da7e395ee6c92f7dfdc68e9bf594">curlinit()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#ga33b9cd3accd2f74148002c9c74c445ef">dtls_listenssl()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#ga42b05e8436cda43d1902250d55b1f738">dtlshandltimeout()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#ga67e51a32a07060fc9bbfa0f6290d471b">dtlstimeout()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#ga16236c11af0004eedd1ed319b6aea38e">dtsl_serveropts()</a>, <a class="el" href="group___l_i_b-_thread.html#ga810e4f7679b9091b76c1976ea1e56371">framework_mkthread()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gaac00b68e6c4511caf1bb4f71596b8913">get_iface_index()</a>, <a class="el" href="group___l_i_b-_thread.html#ga37cee7918b353012cfaf548d7aa6ba44">jointhreads()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#gafb3a53624d50c15f8660fd5e310bfe07">ldap_doadd()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga879a8a9934154de3e8ea1613ebc82ac1">ldap_domodify()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga6437cd7bc7686cae2d851cd060cb1f4e">ldap_saslbind()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga8cfa6cffc3d103b3744c22fbca969b22">ldap_simplebind()</a>, <a class="el" href="group___l_i_b-_n_f-_c_t.html#gaf523d6cd683928e6e788f8b668ff23cd">nf_ctrack_delete()</a>, <a class="el" href="group___l_i_b-_n_f-_c_t.html#ga8a3b7e4a28aab8ae7d4d0727d190c4d6">nf_ctrack_dump()</a>, <a class="el" href="group___l_i_b-_n_f-_c_t.html#ga59780f7ba2bb38f87665952841900419">nf_ctrack_nat()</a>, <a class="el" href="group___l_i_b-_n_f-_q.html#ga6a52ad68b657707bb0657a76e1db96ed">nfqueue_attach()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#ga610e2d3a459838f394de26e8d1320253">remove_bucket_item()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#gaab57f98566f9886d20cfa6229bd163a0">remove_bucket_loop()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga67dcdb7d1138121755d36d6e3f9e7196">set_interface_addr()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga483fe40be559db7e6c35d1fac39f4951">set_interface_flags()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga2f3e0de7dc564bb0a51656e0be0d82df">set_interface_ipaddr()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gaf84e9152d0c6c803c75b6f47772a22ba">set_interface_name()</a>, <a class="el" href="group___l_i_b-_sock.html#ga8dc9b8c4a861709be1b3fb2d105e5f8f">socketread_d()</a>, <a class="el" href="group___l_i_b-_sock.html#ga4c08ae54e4e2d9ae7fa2f3a3a17a2e81">socketserver()</a>, <a class="el" href="group___l_i_b-_sock.html#ga5243da7cf32d5d6e2c53489b1abaa5f3">socketwrite_d()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#gae9827cd82c92fbbf863021671716d3f9">ssl_shutdown()</a>, <a class="el" href="group___l_i_b-_thread.html#gab7bd2e1994fcde659e4188982c34cdd6">stopthreads()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#ga52bd70f08418e41b956872c13814a090">url_escape()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#gad933393278466229d2a14828a4df593d">url_unescape()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaef3b0af8bc75592482ce55e3875afcd8">xml_addnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga6f8b3923d80a744c81b09b819bfd7f07">xml_appendnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gada9bfbed07f75b8f8e8f5edca677a831">xml_createpath()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga5f59b78a8b5cdfe2d376c50368da43de">xml_delete()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga0a819c7f1e5f77b6e45257094f7bfe03">xml_doctobuffer()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaefe8651371b2172192b4ce8588fc3968">xml_getfirstnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gac945eb0741d11973ff122d646be3b32a">xml_getnextnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga35ac563dc4eed070de5d208ba91ba82b">xml_getrootnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gadae350bf1d06cee606661e62d5946ca4">xml_modify()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga497612a3ec78c3c868422359f2ef3f8b">xml_savefile()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gae0d21677f3da1488963d46cc2d6b5c0c">xml_setattr()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga98117200ad77cd4925785d6fc0efb38d">xml_unlink()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga666fda2454f2ccd2673439cdb23caa93">xml_xpath()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga734f1d4ec878a7ae1a50576ee91eef90">xslt_addparam()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga85e429d38a79ac5398a7f3366c88716c">xslt_apply()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga136e5953ac0e97166bdba3323f6787ef">xslt_apply_buffer()</a>, and <a class="el" href="group___l_i_b-_x_s_l_t.html#ga8fb842b8c9126530b5f1da64c388c443">xslt_clearparam()</a>.</p>
<div class="fragment"><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                                 {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordtype">char</span> *ptr = <a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *ref;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    ptr = ptr - <a class="code" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    ref = (<span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *)ptr;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (ref-&gt;<a class="code" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">magic</a> == <a class="code" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        pthread_mutex_unlock(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> (0);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga0fbd2bea995f35a552a2a502e1119977"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a></div><div class="ttdeci">#define refobj_offset</div><div class="ttdoc">The size of ref_obj is the offset for the data. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00119">refobj.c:119</a></div></div>
<div class="ttc" id="structref__obj_html"><div class="ttname"><a href="structref__obj.html">ref_obj</a></div><div class="ttdoc">Internal structure of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00038">refobj.c:38</a></div></div>
<div class="ttc" id="structref__obj_html_a4725a0b14472b6571c3901ccc71bae08"><div class="ttname"><a href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">Pointer to the data referenced. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00054">refobj.c:54</a></div></div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_gaea3b9a72ed0bb7d9e02b0b301035c0a1"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a></div><div class="ttdeci">#define REFOBJ_MAGIC</div><div class="ttdoc">Magic number stored as first field of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00034">refobj.c:34</a></div></div>
<div class="ttc" id="structref__obj_html_a31084d3309cb4bed56ac592d0a29e3e5"><div class="ttname"><a href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdoc">Memory integrity check used to prevent non refeferenced objects been handled as referenced objects...</div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00042">refobj.c:42</a></div></div>
<div class="ttc" id="structref__obj_html_a63af58e8d5b98a6f9d8fba0f335e889d"><div class="ttname"><a href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdoc">this is a pointer to the lock it may be changed to be the lock </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00050">refobj.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga88a966a194cdf36fe9b5be0917ce86d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int objunref </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drop reference held. </p>
<p>If the reference is the last reference call the destructor to clean up and then free the memory used. </p>
<dl class="section warning"><dt>Warning</dt><dd>The reference should not be used again and ideally set to NULL. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Data we are droping a reference for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on error or the refrence count after decrementing. </dd></dl>

<p>Definition at line <a class="el" href="refobj_8c_source.html#l00184">184</a> of file <a class="el" href="refobj_8c_source.html">refobj.c</a>.</p>

<p>References <a class="el" href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">ref_obj::cnt</a>, <a class="el" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a>, <a class="el" href="structref__obj.html#a57d9b7cd22f5680beb35e00d31bc9fc5">ref_obj::destroy</a>, <a class="el" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a>, <a class="el" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a>, <a class="el" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>, <a class="el" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>, and <a class="el" href="structref__obj.html#ab77479cff3d660fbd7af49c237975b1c">ref_obj::size</a>.</p>

<p>Referenced by <a class="el" href="group___l_i_b-_sock.html#gae6766012a1d374280a44c7d33cd88290">accept_socket()</a>, <a class="el" href="group___l_i_b-_r_a_d_i_u_s.html#ga82fdb4e06174c84d7fe8c28f5d903dd4">add_radserver()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#ga63890af5b9f14017f9face6f7255a955">addtobucket()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#gadcbb1534c836ba15aa2acf066bd5fff7">bucket_list_find_key()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#ga55c344ef8eb37a0a76eac1de01d36349">bucketlist_callback()</a>, <a class="el" href="group___l_i_b-_sock.html#gae2172d725d57ad6446229c480f907dc7">close_socket()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga9ce69bb84a28b4d0ce7a8e4d1bcdbe8b">closenetlink()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gae4744405b8a043979aa4ea1cfde174ef">create_kernmac()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gad4b0322139d45ba2b60e21a639fa9c29">create_kernvlan()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#gae187af55948eae8d0319de9fd955d519">curl_setauth_cb()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#gacb39882769c9cec0d27ba2b0894701b7">curl_setprogress()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#gaaee74d5f000f998ebbc3b8b0a7dbdaff">curlclose()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#ga9164da7e395ee6c92f7dfdc68e9bf594">curlinit()</a>, <a class="el" href="group___l_i_b.html#ga869452f0c0952acd39230fcf0ef89c1e">daemonize()</a>, <a class="el" href="group___l_i_b-_sock-_s_s_l.html#ga33b9cd3accd2f74148002c9c74c445ef">dtls_listenssl()</a>, <a class="el" href="group___l_i_b.html#ga2cbddb1a87e905e7d016b74657758d4d">framework_init()</a>, <a class="el" href="group___l_i_b.html#gaec2d2872af6e5a3bc1d39f5837173023">framework_mkcore()</a>, <a class="el" href="group___l_i_b-_thread.html#ga810e4f7679b9091b76c1976ea1e56371">framework_mkthread()</a>, <a class="el" href="group___l_i_b-_thread.html#ga353bdf95751aa5ab798091ffd907892e">framework_threadok()</a>, <a class="el" href="group___l_i_b-_i_n_i.html#ga9f9a4e6930756767fd89ceda044e0c3d">get_category_loop()</a>, <a class="el" href="group___l_i_b-_i_n_i.html#gacda25f5961b62c5de343589c3a72b771">get_category_next()</a>, <a class="el" href="group___l_i_b-_i_n_i.html#ga86c44d5b975637cbf0a84e034a4c3d1e">get_config_category()</a>, <a class="el" href="group___l_i_b-_i_n_i.html#gaa3e89f20af266ba0c27f389645246390">get_config_file()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gaac00b68e6c4511caf1bb4f71596b8913">get_iface_index()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga435f9d4ee54e7cbcd15b2f196cedf3e1">ifhwaddr()</a>, <a class="el" href="group___l_i_b-_thread.html#ga37cee7918b353012cfaf548d7aa6ba44">jointhreads()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga24b3915edde964794044b98753061ac9">ldap_add_attr()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#gafce6d8814b3bdf793cabb6fcc2f79833">ldap_addinit()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga03ad7ee259ae4078e34f4852ef4b0ac9">ldap_connect()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#gafb3a53624d50c15f8660fd5e310bfe07">ldap_doadd()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga879a8a9934154de3e8ea1613ebc82ac1">ldap_domodify()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga513d5e047d0f19707c7c963b1c2fbf31">ldap_mod_add()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga16cc13aeb5ff4def608e982e5fd97e4f">ldap_mod_addattr()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga5183fcfeef2b48f53460e768833ff48b">ldap_mod_del()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#gafac737011be5c036bffca7c50f6d9e35">ldap_mod_delattr()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#gac2872bc6cb483558f6917063d1c12bfd">ldap_mod_rep()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#gaa43db6398e132740a5dc8d3bf6acdc73">ldap_mod_repattr()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga9abb041462703514fe1ed59a071bf688">ldap_modifyinit()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga6437cd7bc7686cae2d851cd060cb1f4e">ldap_saslbind()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga8cfa6cffc3d103b3744c22fbca969b22">ldap_simplebind()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga511bc5a9f787d72bee5d47d0e4af7f2d">ldap_simplerebind()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga9259d04f5cd09ec2bf0f96c904976f5e">ldap_unref_attr()</a>, <a class="el" href="group___l_i_b-_l_d_a_p.html#ga293cb196f673abba19c663a64c0943f4">ldap_unref_entry()</a>, <a class="el" href="group___l_i_b-_sock.html#gaa03b1cc30d7c0a8b82ec5ee643a95a20">make_socket()</a>, <a class="el" href="group___l_i_b-_sock-_m_c_a_s_t.html#gab975db17c51345320346da0a8abc3750">mcast_socket()</a>, <a class="el" href="group___l_i_b-_n_f-_c_t.html#ga1895d9629dd920cec1e591194872e013">nf_ctrack_close()</a>, <a class="el" href="group___l_i_b-_n_f-_c_t.html#gaf31092fdacc01de009db4f995ecb24be">nf_ctrack_endtrace()</a>, <a class="el" href="group___l_i_b-_n_f-_c_t.html#ga2c5444b28509b9c040a84070b5cc31d7">nf_ctrack_trace()</a>, <a class="el" href="group___l_i_b-_n_f-_q.html#ga6a52ad68b657707bb0657a76e1db96ed">nfqueue_attach()</a>, <a class="el" href="group___l_i_b-_i_n_i.html#ga7dbeb9280e11b1b65574494a2fc01160">process_config()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#ga610e2d3a459838f394de26e8d1320253">remove_bucket_item()</a>, <a class="el" href="group___l_i_b-_o_b_j-_bucket.html#gaab57f98566f9886d20cfa6229bd163a0">remove_bucket_loop()</a>, <a class="el" href="group___l_i_b-_n_a_t6.html#ga6c761d18183be3df327a2a1d9bc0bfa9">rfc6296_map_add()</a>, <a class="el" href="group___l_i_b-_n_a_t6.html#ga05d6c7b8c8759920bf5103742987f7a6">rfc6296_test()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga67dcdb7d1138121755d36d6e3f9e7196">set_interface_addr()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga483fe40be559db7e6c35d1fac39f4951">set_interface_flags()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#ga2f3e0de7dc564bb0a51656e0be0d82df">set_interface_ipaddr()</a>, <a class="el" href="group___l_i_b-_i_f_a_c_e.html#gaf84e9152d0c6c803c75b6f47772a22ba">set_interface_name()</a>, <a class="el" href="group___l_i_b-_sock.html#ga8dc9b8c4a861709be1b3fb2d105e5f8f">socketread_d()</a>, <a class="el" href="group___l_i_b-_sock.html#ga5243da7cf32d5d6e2c53489b1abaa5f3">socketwrite_d()</a>, <a class="el" href="group___l_i_b-_thread.html#ga5196903ef5e3e656b28c52e045f7c3f3">startthreads()</a>, <a class="el" href="group___l_i_b-_thread.html#gab7bd2e1994fcde659e4188982c34cdd6">stopthreads()</a>, <a class="el" href="group___l_i_b-_thread.html#gafcf02c5b3ad154edab43803818532078">thread_signal()</a>, <a class="el" href="group___l_i_b-_sock-_unix.html#gac55bd1419f27dce6b1b8ccd5e6490d12">unixsocket_client()</a>, <a class="el" href="group___l_i_b-_sock-_unix.html#ga9fe98a54d1e9ab578c98b109a3971900">unixsocket_server()</a>, <a class="el" href="group___l_i_b-_i_n_i.html#ga7db3b481bde09a6ab984a9265c71d93a">unrefconfigfiles()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#ga52bd70f08418e41b956872c13814a090">url_escape()</a>, <a class="el" href="group___l_i_b-_c_u_r_l.html#gad933393278466229d2a14828a4df593d">url_unescape()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaef3b0af8bc75592482ce55e3875afcd8">xml_addnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga6f8b3923d80a744c81b09b819bfd7f07">xml_appendnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga288b8eaec2e455175cb69df63e351bc7">xml_close()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gada9bfbed07f75b8f8e8f5edca677a831">xml_createpath()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga63131b697dd2e587e1ce57a0bdefc23c">xml_getattr()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaefe8651371b2172192b4ce8588fc3968">xml_getfirstnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gac945eb0741d11973ff122d646be3b32a">xml_getnextnode()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gaada81bc87913891f55c310a2c4883037">xml_loadbuf()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#gac174e9b8be0495cd4a4a1a299905054e">xml_loaddoc()</a>, <a class="el" href="group___l_i_b-_x_m_l.html#ga666fda2454f2ccd2673439cdb23caa93">xml_xpath()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga734f1d4ec878a7ae1a50576ee91eef90">xslt_addparam()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga85e429d38a79ac5398a7f3366c88716c">xslt_apply()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga136e5953ac0e97166bdba3323f6787ef">xslt_apply_buffer()</a>, <a class="el" href="group___l_i_b-_x_s_l_t.html#ga8fb842b8c9126530b5f1da64c388c443">xslt_clearparam()</a>, and <a class="el" href="group___l_i_b-_x_s_l_t.html#gadb8efbf58a429598709d586518e25625">xslt_close()</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                                {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">char</span> *ptr = <a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *ref;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordtype">int</span> ret = -1;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a>) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">return</span> (ret);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    ptr = ptr - <a class="code" href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    ref = (<span class="keyword">struct </span><a class="code" href="structref__obj.html">ref_obj</a> *)ptr;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> ((ref-&gt;<a class="code" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">magic</a> == <a class="code" href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a>) &amp;&amp; (ref-&gt;<a class="code" href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">cnt</a>)) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        pthread_mutex_lock(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        ref-&gt;<a class="code" href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">cnt</a>--;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        ret = ref-&gt;<a class="code" href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">cnt</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">/* free the object its no longer in use*/</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">if</span> (!ret) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            ref-&gt;<a class="code" href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">magic</a> = 0;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            ref-&gt;<a class="code" href="structref__obj.html#ab77479cff3d660fbd7af49c237975b1c">size</a> = 0;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            ref-&gt;<a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a> = NULL;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">if</span> (ref-&gt;<a class="code" href="structref__obj.html#a57d9b7cd22f5680beb35e00d31bc9fc5">destroy</a>) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                ref-&gt;<a class="code" href="structref__obj.html#a57d9b7cd22f5680beb35e00d31bc9fc5">destroy</a>(<a class="code" href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">data</a>);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            pthread_mutex_unlock(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            pthread_mutex_destroy(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            free(ref);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            pthread_mutex_unlock(&amp;ref-&gt;<a class="code" href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">lock</a>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> (ret);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_ga0fbd2bea995f35a552a2a502e1119977"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#ga0fbd2bea995f35a552a2a502e1119977">refobj_offset</a></div><div class="ttdeci">#define refobj_offset</div><div class="ttdoc">The size of ref_obj is the offset for the data. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00119">refobj.c:119</a></div></div>
<div class="ttc" id="structref__obj_html_a57d9b7cd22f5680beb35e00d31bc9fc5"><div class="ttname"><a href="structref__obj.html#a57d9b7cd22f5680beb35e00d31bc9fc5">ref_obj::destroy</a></div><div class="ttdeci">objdestroy destroy</div><div class="ttdoc">Function to call to clean up the data before its freed. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00052">refobj.c:52</a></div></div>
<div class="ttc" id="structref__obj_html"><div class="ttname"><a href="structref__obj.html">ref_obj</a></div><div class="ttdoc">Internal structure of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00038">refobj.c:38</a></div></div>
<div class="ttc" id="structref__obj_html_a4725a0b14472b6571c3901ccc71bae08"><div class="ttname"><a href="structref__obj.html#a4725a0b14472b6571c3901ccc71bae08">ref_obj::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">Pointer to the data referenced. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00054">refobj.c:54</a></div></div>
<div class="ttc" id="group___l_i_b-_o_b_j_html_gaea3b9a72ed0bb7d9e02b0b301035c0a1"><div class="ttname"><a href="group___l_i_b-_o_b_j.html#gaea3b9a72ed0bb7d9e02b0b301035c0a1">REFOBJ_MAGIC</a></div><div class="ttdeci">#define REFOBJ_MAGIC</div><div class="ttdoc">Magic number stored as first field of all referenced objects. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00034">refobj.c:34</a></div></div>
<div class="ttc" id="structref__obj_html_ab77479cff3d660fbd7af49c237975b1c"><div class="ttname"><a href="structref__obj.html#ab77479cff3d660fbd7af49c237975b1c">ref_obj::size</a></div><div class="ttdeci">size_t size</div><div class="ttdoc">The size allocated to this object. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00048">refobj.c:48</a></div></div>
<div class="ttc" id="structref__obj_html_a31084d3309cb4bed56ac592d0a29e3e5"><div class="ttname"><a href="structref__obj.html#a31084d3309cb4bed56ac592d0a29e3e5">ref_obj::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdoc">Memory integrity check used to prevent non refeferenced objects been handled as referenced objects...</div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00042">refobj.c:42</a></div></div>
<div class="ttc" id="structref__obj_html_a9f9b349333420bc708187ef7fd7f0984"><div class="ttname"><a href="structref__obj.html#a9f9b349333420bc708187ef7fd7f0984">ref_obj::cnt</a></div><div class="ttdeci">uint32_t cnt</div><div class="ttdoc">Reference count the oject will be freed when the reference count reaches 0. </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00045">refobj.c:45</a></div></div>
<div class="ttc" id="structref__obj_html_a63af58e8d5b98a6f9d8fba0f335e889d"><div class="ttname"><a href="structref__obj.html#a63af58e8d5b98a6f9d8fba0f335e889d">ref_obj::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdoc">this is a pointer to the lock it may be changed to be the lock </div><div class="ttdef"><b>Definition:</b> <a href="refobj_8c_source.html#l00050">refobj.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Oct 23 2013 10:44:29 for DTS Application Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
